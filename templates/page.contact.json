/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "main": {
      "type": "main-page",
      "settings": {
        "padding_top": 36,
        "padding_bottom": 36
      }
    },
    "form": {
      "type": "contact-form",
      "settings": {
        "heading": "",
        "heading_size": "h1",
        "color_scheme": "scheme-1",
        "padding_top": 36,
        "padding_bottom": 36
      }
    },
    "custom_liquid_H6E7ad": {
      "type": "custom-liquid",
      "name": "t:sections.custom-liquid.presets.name",
      "settings": {
        "custom_liquid": "{% if customer %}\n<script>\ndocument.addEventListener('DOMContentLoaded', function() {\n  const checkinButton = document.getElementById('daily-checkin-btn');\n  \n  if (checkinButton) {\n    checkinButton.addEventListener('click', async function() {\n      // ç¦ç”¨æŒ‰é’®é˜²æ­¢é‡å¤ç‚¹å‡»\n      checkinButton.disabled = true;\n      checkinButton.textContent = 'æ‰“å¡ä¸­...';\n      \n      try {\n        // è°ƒç”¨Growave API\n        const response = await fetch('https://api.growave.io/v1/custom_actions/trigger', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer {{ settings.growave_api_token | escape }}'\n          },\n          body: JSON.stringify({\n            action_id: '{{ settings.growave_checkin_action_id }}',\n            customer: {\n              email: {{ customer.email | json }},\n              id: {{ customer.id | json }},\n              first_name: {{ customer.first_name | json }},\n              last_name: {{ customer.last_name | json }}\n            },\n            metadata: {\n              checkin_date: new Date().toISOString(),\n              user_agent: navigator.userAgent,\n              page_url: window.location.href\n            }\n          })\n        });\n        \n        const result = await response.json();\n        \n        if (result.success) {\n          // æ ¹æ®è¿ç»­å¤©æ•°æ˜¾ç¤ºä¸åŒå¥–åŠ±\n          const streak = result.data.streak_days || 1;\n          showRewardMessage(streak);\n          \n          // æ›´æ–°UI\n          updateCheckinUI(true, streak);\n        } else {\n          throw new Error(result.message || 'æ‰“å¡å¤±è´¥');\n        }\n        \n      } catch (error) {\n        console.error('Checkin failed:', error);\n        alert('æ‰“å¡å¤±è´¥: ' + error.message);\n        checkinButton.disabled = false;\n        checkinButton.textContent = 'ç«‹å³æ‰“å¡';\n      }\n    });\n  }\n  \n  function showRewardMessage(streak) {\n    const rewards = {\n      2: { title: 'å¥–åŠ±A', discount: '10%OFF', type: 'coupon_a' },\n      3: { title: 'å¥–åŠ±A', discount: '10%OFF', type: 'coupon_a' },\n      4: { title: 'å¥–åŠ±B', discount: '15%OFF+å…é‚®', type: 'coupon_b' },\n      5: { title: 'å¥–åŠ±B', discount: '15%OFF+å…é‚®', type: 'coupon_b' },\n      6: { title: 'å¥–åŠ±C', discount: '20%OFF+$5ç¤¼å“å¡', type: 'coupon_c' }\n    };\n    \n    const reward = rewards[streak];\n    if (reward) {\n      // æ˜¾ç¤ºå¥–åŠ±å¼¹çª—\n      const modal = document.createElement('div');\n      modal.className = 'reward-modal';\n      modal.innerHTML = `\n        <div class=\"modal-content\">\n          <h3>ğŸ‰ æ­å–œï¼è¿ç»­æ‰“å¡ ${streak} å¤©</h3>\n          <p>è·å¾—${reward.title}: ${reward.discount}</p>\n          <p>æŠ˜æ‰£ç å·²å‘é€åˆ°æ‚¨çš„è´¦æˆ·</p>\n          <button onclick=\"this.closest('.reward-modal').remove()\">ç¡®å®š</button>\n        </div>\n      `;\n      document.body.appendChild(modal);\n    } else {\n      alert(`æ‰“å¡æˆåŠŸï¼å½“å‰è¿ç»­${streak}å¤©`);\n    }\n  }\n  \n  function updateCheckinUI(isCheckedIn, streak) {\n    const streakElement = document.getElementById('streak-count');\n    const button = document.getElementById('daily-checkin-btn');\n    \n    if (streakElement) streakElement.textContent = streak;\n    if (button) {\n      button.disabled = isCheckedIn;\n      button.textContent = isCheckedIn ? 'ä»Šæ—¥å·²æ‰“å¡ âœ“' : 'ç«‹å³æ‰“å¡';\n    }\n  }\n});\n</script>\n{% endif %}",
        "color_scheme": "",
        "padding_top": 40,
        "padding_bottom": 52
      }
    }
  },
  "order": [
    "main",
    "form",
    "custom_liquid_H6E7ad"
  ]
}
